# Worker coops, happy workers
communism.9 = {
	type = country_event
	placement = scope:coop_state
	title = communism.9.t
	desc = communism.9.d
	flavor = communism.9.f
	duration = 3
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	event_image = {
		video = "africa_prosperous_farm"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	trigger = {
		has_law = law_type:law_council_republic
		any_scope_state = {
			is_incorporated = yes
			NOT = {
				has_modifier = coop_loyalty_modifier
			}
			NOT = {
				has_modifier = coop_migration_modifier
			}
			any_scope_pop = {
				pop_is_discriminated = no
				standard_of_living > 15
				workplace ?= {
					OR = {
						has_active_production_method = pm_worker_cooperative_building_food_industry
						has_active_production_method = pm_worker_cooperative_building_distillery
						has_active_production_method = pm_worker_cooperative_building_textile_mills
						has_active_production_method = pm_worker_cooperative_building_furniture_manufacturies
						has_active_production_method = pm_worker_cooperative_building_glassworks
						has_active_production_method = pm_worker_cooperative_building_tooling_workshops
						has_active_production_method = pm_worker_cooperative_building_paper_mills
						has_active_production_method = pm_worker_cooperative_building_shipyards
						has_active_production_method = pm_worker_cooperative_building_arms_industry
						has_active_production_method = pm_worker_cooperative_farm
						has_active_production_method = pm_worker_cooperative_building_logging_camp
						has_active_production_method = pm_worker_cooperative_building_fishing_wharf
						has_active_production_method = pm_worker_cooperative_building_whaling_station
						has_active_production_method = pm_worker_cooperative_plantation
						has_active_production_method = pm_worker_cooperative_industry
						has_active_production_method = pm_worker_cooperative_building_coal_mine
						has_active_production_method = pm_worker_cooperative_building_iron_mine
						has_active_production_method = pm_worker_cooperative_building_lead_mine
						has_active_production_method = pm_worker_cooperative_building_sulfur_mine
					}
					cash_reserves_ratio > 0.25
					weekly_profit > 5
					occupancy >= 0.95
					level >= 5
				}
			}
		}
	}
	immediate = {
		random_scope_state = {
			limit = {
				is_incorporated = yes
				NOT = {
					has_modifier = coop_loyalty_modifier
				}
				NOT = {
					has_modifier = coop_migration_modifier
				}
				any_scope_pop = {
					pop_is_discriminated = no
					standard_of_living > 15
					workplace ?= {
						OR = {
							has_active_production_method = pm_worker_cooperative_building_food_industry
							has_active_production_method = pm_worker_cooperative_building_distillery
							has_active_production_method = pm_worker_cooperative_building_textile_mills
							has_active_production_method = pm_worker_cooperative_building_furniture_manufacturies
							has_active_production_method = pm_worker_cooperative_building_glassworks
							has_active_production_method = pm_worker_cooperative_building_tooling_workshops
							has_active_production_method = pm_worker_cooperative_building_paper_mills
							has_active_production_method = pm_worker_cooperative_building_shipyards
							has_active_production_method = pm_worker_cooperative_building_arms_industry
							has_active_production_method = pm_worker_cooperative_farm
							has_active_production_method = pm_worker_cooperative_building_logging_camp
							has_active_production_method = pm_worker_cooperative_building_fishing_wharf
							has_active_production_method = pm_worker_cooperative_building_whaling_station
							has_active_production_method = pm_worker_cooperative_plantation
							has_active_production_method = pm_worker_cooperative_industry
							has_active_production_method = pm_worker_cooperative_building_coal_mine
							has_active_production_method = pm_worker_cooperative_building_iron_mine
							has_active_production_method = pm_worker_cooperative_building_lead_mine
							has_active_production_method = pm_worker_cooperative_building_sulfur_mine
						}
						cash_reserves_ratio > 0.25
						weekly_profit > 5
						occupancy >= 0.95
						level >= 5
					}
				}
			}
			save_scope_as = coop_state
			random_scope_pop = {
				limit = {
					pop_is_discriminated = no
					standard_of_living > 15
					workplace ?= {
						OR = {
							has_active_production_method = pm_worker_cooperative_building_food_industry
							has_active_production_method = pm_worker_cooperative_building_distillery
							has_active_production_method = pm_worker_cooperative_building_textile_mills
							has_active_production_method = pm_worker_cooperative_building_furniture_manufacturies
							has_active_production_method = pm_worker_cooperative_building_glassworks
							has_active_production_method = pm_worker_cooperative_building_tooling_workshops
							has_active_production_method = pm_worker_cooperative_building_paper_mills
							has_active_production_method = pm_worker_cooperative_building_shipyards
							has_active_production_method = pm_worker_cooperative_building_arms_industry
							has_active_production_method = pm_worker_cooperative_farm
							has_active_production_method = pm_worker_cooperative_building_logging_camp
							has_active_production_method = pm_worker_cooperative_building_fishing_wharf
							has_active_production_method = pm_worker_cooperative_building_whaling_station
							has_active_production_method = pm_worker_cooperative_plantation
							has_active_production_method = pm_worker_cooperative_industry
							has_active_production_method = pm_worker_cooperative_building_coal_mine
							has_active_production_method = pm_worker_cooperative_building_iron_mine
							has_active_production_method = pm_worker_cooperative_building_lead_mine
							has_active_production_method = pm_worker_cooperative_building_sulfur_mine
						}
						cash_reserves_ratio > 0.25
						weekly_profit > 5
						occupancy >= 0.95
						level >= 5
					}
				}
				save_scope_as = coop_pop
				workplace = {
					save_scope_as = coop_building
				}
			}
		}
	}
	option = {
		name = communism.9.a
		default_option = yes
		scope:coop_state = {
			add_modifier = {
				name = coop_loyalty_modifier
				months = normal_modifier_time
			}
		}
	}
	option = {
		name = communism.9.b
		scope:coop_state = {
			add_modifier = {
				name = coop_migration_modifier
				months = normal_modifier_time
			}
		}
	}
}

decree_events.100 = {
	#Throughput vs minimum sol
	type = country_event
	placement = scope:decree_manufacturing_industry
	title = decree_events.100.t
	desc = decree_events.100.d
	flavor = decree_events.100.f
	event_image = {
		video = "unspecific_gears_pistons"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_trade.dds"
	duration = 3
	trigger = {
		any_scope_state = {
			is_incorporated = yes
			has_decree = decree_encourage_manufacturing_industry
			any_scope_building = {
				OR = {
					is_building_type = building_food_industry
					is_building_type = building_distillery
					is_building_type = building_textile_mills
					is_building_type = building_furniture_manufacturies
					is_building_type = building_glassworks
					is_building_type = building_tooling_workshops
					is_building_type = building_paper_mills
					is_building_type = building_chemical_plants
					is_building_type = building_explosives_factory
					is_building_type = building_synthetics_plants
					is_building_type = building_steel_mills
					is_building_type = building_motor_industry
					is_building_type = building_shipyards
					is_building_type = building_war_machine_industry
					is_building_type = building_electrics_industry
					is_building_type = building_arms_industry
					is_building_type = building_munition_plants
					is_building_type = building_power_plant
				}
				weekly_profit > 0
				cash_reserves_ratio > 0.5
			}
			NOR = {
				has_modifier = decree_manufacturing_throughput
				has_modifier = decree_minimum_wealth
			}
		}
	}
	immediate = {
		random_scope_state = {
			limit = {
				is_incorporated = yes
				has_decree = decree_encourage_manufacturing_industry
				NOR = {
					has_modifier = decree_manufacturing_throughput
					has_modifier = decree_minimum_wealth
				}
			}
			save_scope_as = decree_manufacturing_industry
			random_scope_building = {
				limit = {
					OR = {
						is_building_type = building_food_industry
						is_building_type = building_distillery
						is_building_type = building_textile_mills
						is_building_type = building_furniture_manufacturies
						is_building_type = building_glassworks
						is_building_type = building_tooling_workshops
						is_building_type = building_paper_mills
						is_building_type = building_chemical_plants
						is_building_type = building_explosives_factory
						is_building_type = building_synthetics_plants
						is_building_type = building_steel_mills
						is_building_type = building_motor_industry
						is_building_type = building_shipyards
						is_building_type = building_war_machine_industry
						is_building_type = building_electrics_industry
						is_building_type = building_arms_industry
						is_building_type = building_munition_plants
						is_building_type = building_power_plant
					}
					weekly_profit > 0
					cash_reserves_ratio > 0.5
				}
				save_scope_as = manufacturing_building_production
			}
		}
	}
	option = {
		#increased throughput
		name = decree_events.100.a
		default_option = yes
		scope:decree_manufacturing_industry = {
			add_modifier = {
				name = decree_manufacturing_throughput
				months = short_modifier_time
			}
		}
	}
	option = {
		#Increase expected SoL
		name = decree_events.100.b
		trigger = {
			institution_investment_level = {
				institution = institution_social_security
				value >= 1
			}
		}
		scope:decree_manufacturing_industry = {
			add_modifier = {
				name = decree_minimum_wealth
				months = short_modifier_time
			}
		}
	}
}

decree_events.101 = {
	#Choose who gets the credit
	type = country_event
	placement = scope:decree_manufacturing_politics
	title = decree_events.101.t
	desc = decree_events.101.d
	flavor = decree_events.101.f
	event_image = {
		video = "europenorthamerica_capitalists_meeting"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	duration = 3
	trigger = {
		any_scope_state = {
			is_incorporated = yes
			has_decree = decree_encourage_manufacturing_industry
			any_scope_building = {
				OR = {
					is_building_type = building_food_industry
					is_building_type = building_distillery
					is_building_type = building_textile_mills
					is_building_type = building_furniture_manufacturies
					is_building_type = building_glassworks
					is_building_type = building_tooling_workshops
					is_building_type = building_paper_mills
					is_building_type = building_chemical_plants
					is_building_type = building_explosives_factory
					is_building_type = building_synthetics_plants
					is_building_type = building_steel_mills
					is_building_type = building_motor_industry
					is_building_type = building_shipyards
					is_building_type = building_war_machine_industry
					is_building_type = building_electrics_industry
					is_building_type = building_arms_industry
					is_building_type = building_munition_plants
					is_building_type = building_power_plant
				}
				weekly_profit > 0
				cash_reserves_ratio > 0.5
			}
		}
		NOR = {
			has_modifier = decree_manufacturing_industrialist_attraction
			has_modifier = decree_manufacturing_trade_attraction
			has_modifier = decree_manufacturing_petty_bourgeoisie_attraction
		}
	}
	immediate = {
		random_scope_state = {
			limit = {
				is_incorporated = yes
				has_decree = decree_encourage_manufacturing_industry
				NOR = {
					has_modifier = decree_manufacturing_industrialist_attraction
					has_modifier = decree_manufacturing_trade_attraction
					has_modifier = decree_manufacturing_petty_bourgeoisie_attraction
				}
			}
			save_scope_as = decree_manufacturing_politics
			random_scope_building = {
				limit = {
					OR = {
						is_building_type = building_food_industry
						is_building_type = building_distillery
						is_building_type = building_textile_mills
						is_building_type = building_furniture_manufacturies
						is_building_type = building_glassworks
						is_building_type = building_tooling_workshops
						is_building_type = building_paper_mills
						is_building_type = building_chemical_plants
						is_building_type = building_explosives_factory
						is_building_type = building_synthetics_plants
						is_building_type = building_steel_mills
						is_building_type = building_motor_industry
						is_building_type = building_shipyards
						is_building_type = building_war_machine_industry
						is_building_type = building_electrics_industry
						is_building_type = building_arms_industry
						is_building_type = building_munition_plants
						is_building_type = building_power_plant
					}
					weekly_profit > 0
					cash_reserves_ratio > 0.5
				}
				save_scope_as = manufacturing_building_production_politics
			}
		}
		ig:ig_industrialists = {
			save_scope_as = industrialists_ig_focus
		}
	}
	option = {
		#Industrialists
		name = decree_events.101.a
		default_option = yes
		add_modifier = {
			name = decree_manufacturing_industrialist_attraction
			months = short_modifier_time
		}
	}
	option = {
		#trade union
		name = decree_events.101.b
		add_modifier = {
			name = decree_manufacturing_trade_attraction
			months = short_modifier_time
		}
	}
	option = {
		#petty pisses off other two
		name = decree_events.101.c
		add_modifier = {
			name = decree_manufacturing_petty_bourgeoisie_attraction
			months = short_modifier_time
		}
	}
}

# The Great Molasses Flood
industrial_accident_events.4 = {
	type = country_event
	placement = scope:molasses_flood_state
	title = industrial_accident_events.4.t
	desc = industrial_accident_events.4.d
	flavor = industrial_accident_events.4.f
	event_image = {
		video = "asia_factory_accident"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	duration = 3
	trigger = {
		any_scope_state = {
			has_building = building_distillery
			is_production_method_active = {
				building_type = building_distillery
				production_method = pm_rum
			}
		}
		NOT = {
			has_variable = great_molasses_flood
		}
	}
	immediate = {
		random_scope_state = {
			limit = {
				has_building = building_distillery
				is_production_method_active = {
					building_type = building_distillery
					production_method = pm_rum
				}
			}
			save_scope_as = molasses_flood_state
		}
		set_variable = {
			name = great_molasses_flood
			value = yes
		}
	}
	option = {
		name = industrial_accident_events.4.a
		default_option = yes
		scope:molasses_flood_state = {
			add_modifier = {
				name = modifier_bg_diminished_rum_production
				months = normal_modifier_time
			}
		}
	}
	option = {
		name = industrial_accident_events.4.b
		scope:molasses_flood_state = {
			add_radicals_in_state = {
				pop_type = machinists
				value = medium_radicals
			}
			add_radicals_in_state = {
				pop_type = engineers
				value = medium_radicals
			}
			add_radicals_in_state = {
				pop_type = clerks
				value = medium_radicals
			}
			add_radicals_in_state = {
				pop_type = shopkeepers
				value = medium_radicals
			}
		}
	}
}

pm_events.3 = {
	type = country_event
	placement = scope:liquor_making_state
	title = pm_events.3.t
	desc = pm_events.3.d
	flavor = pm_events.3.f
	event_image = {
		video = "unspecific_temperance_movement"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	duration = 3
	cooldown = {
		months = normal_modifier_time
	}
	trigger = {
		any_scope_state = {
			has_building = building_distillery
			NOR = {
				has_modifier = liquor_production_ban
				has_modifier = liquor_production_restrictions
			}
		}
		ig:ig_devout = {
			NOR = {
				has_modifier = permitted_limited_liquor_production
				has_modifier = permitted_unrestricted_liquor_production
			}
		}
	}
	immediate = {
		random_scope_state = {
			limit = {
				has_building = building_distillery
				NOR = {
					has_modifier = liquor_production_ban
					has_modifier = liquor_production_restrictions
				}
			}
			save_scope_as = liquor_making_state
		}
	}
	option = {
		name = pm_events.3.a
		scope:liquor_making_state = {
			add_modifier = {
				name = liquor_production_ban
				months = normal_modifier_time
			}
		}
		if = {
			limit = {
				has_variable = prohibition_laws_var
			}
			custom_tooltip = prohibition_laws_pm.tt
			change_variable = {
				name = prohibition_laws_var
				add = 5
			}
		}
	}
	option = {
		name = pm_events.3.b
		scope:liquor_making_state = {
			add_modifier = {
				name = liquor_production_restrictions
				months = normal_modifier_time
			}
		}
		ig:ig_devout = {
			add_modifier = {
				name = permitted_limited_liquor_production
				months = normal_modifier_time
			}
		}
		if = {
			limit = {
				has_variable = prohibition_laws_var
			}
			custom_tooltip = prohibition_laws_weak_pm.tt
			change_variable = {
				name = prohibition_laws_var
				add = 2
			}
		}
	}
	option = {
		name = pm_events.3.c
		ig:ig_devout = {
			add_modifier = {
				name = permitted_unrestricted_liquor_production
				months = normal_modifier_time
			}
		}
		default_option = yes
		if = {
			limit = {
				has_variable = prohibition_laws_var
			}
			custom_tooltip = prohibition_laws_bad_pm.tt
			change_variable = {
				name = prohibition_laws_var
				subtract = 5
			}
		}
	}
}
